<!DOCTYPE html>
<html  lang="zh" xmlns:th="http://www.thymeleaf.org">
<title>小说阅读</title>
<link th:href="${session.staticResourcePath +'/static/css/book/book.css'}" rel="stylesheet"/>
<head th:include="include :: head"></head>

<body class="antialiased" style="background-color: #FFFFFF;">
<div class="page">
  <header class="navbar navbar-expand-md navbar-light">
    <div class="container-xl">
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <!--头部左边logo-->
      <div th:replace="include :: logoImage"></div>
      <!--头部右边 是否登录还是显示用户头像-->
      <div th:include="include :: navigationBar"></div>
    </div>
  </header>
  <!--导航栏-->
  <div th:include="include :: navigationMenu('book')" class="navbar-expand-md"></div>
      <div class="content">
        <div class="container-xl">
          <!-- Page title -->
          <div class="page-header">
            <div class="row align-items-center">
              <div class="col-auto">
                <h2 class="page-title">
                 小说书籍列表
                </h2>
              </div>
              <div class="col-auto" style="margin-left: 10px;">
                <div class="text-muted text-h5 mt-2" th:text="${startNum} + '-' + ${endNum} + '&nbsp;of&nbsp;' + ${totalNum} +'  本小说'">1-12 of 241 books</div>
              </div>
              <!-- Page title actions -->
              <div class="col-auto ml-auto d-print-none">
                <div class="d-flex">
                  <div class="mr-3" style="margin-right: 0rem!important;">
                    <div class="input-icon">
                      <input type="text" id="searchBook" th:value="${bookName}" name="bookName" class="form-control" placeholder="Search bookName…">
                      <span class="input-icon-addon">
                        <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7" /><line x1="21" y1="21" x2="15" y2="15" /></svg>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="page-header">
            <div class="row align-items-center">
                <div>
                  <!--book分类-->
                  <div class="bookstore_tbox ">
                    <div class="bookstore_select">
                      <div class="nr sexsel">
                        <a class="current store" href="" booktype="0">男生频道</a>
                        <span>|</span>
                        <a class="store" href="" booktype="1">女生频道</a>
                      </div>
                      <div class="select_con">
                        <!-- 作品分类 -->
                        <div class="kind">
                          <div class="bz">作品分类：</div>
                          <div class="nr br sub">
                            <a class="current store" href="" th:href="${'index.html'}" th:class="${category==null?'current ':'store'}">全部作品</a>
                            <a class="store" href="" th:href="${'index.html?category=玄幻魔法'}" th:class="${'玄幻魔法' eq category?'current':' store'}">玄幻魔法<em></em></a>
                            <a class="store" href="" th:href="${'index.html?category=武侠修真'}" th:class="${'武侠修真' eq category?'current':' store'}">武侠修真<em></em></a>
                            <a class="store" href="" th:href="${'index.html?category=都市言情'}" th:class="${'都市言情' eq category?'current':' store'}">都市言情<em></em></a>
                            <a class="store" href="" th:href="${'index.html?category=历史军事'}" th:class="${'历史军事' eq category?'current':' store'}">历史军事<em></em></a>
                            <a class="store" href="" th:href="${'index.html?category=侦探推理'}" th:class="${'侦探推理' eq category?'current':' store'}">侦探推理<em></em></a>
                            <a class="store" href="" th:href="${'index.html?category=网游动漫'}" th:class="${'网游动漫' eq category?'current':' store'}">网游动漫<em></em></a>
                            <a class="store" href="" th:href="${'index.html?category=科幻灵异'}" th:class="${'科幻灵异' eq category?'current':' store'}">科幻灵异<em></em></a>
                            <a class="store" href="" >评论文集<em></em></a>
                            <a class="store" href="" >二次元<em></em></a>
                            <br>
                          </div>

                        </div>
                        <!-- 写作进度 -->
                        <div class="kind">
                          <div class="bz">写作进度：</div>
                          <div class="nr br">
                            <a class="current store" href="" serialstatus="9">全部</a>
                            <a class="store" href="" serialstatus="0">连载中</a>
                            <a class="store" href="" serialstatus="1">已完结</a>
                          </div>
                          <div class="cl0"></div>
                        </div>
                        <!-- 作品字数 -->
                        <div class="kind">
                          <div class="bz">作品字数：</div>
                          <div class="nr br">
                            <a class="current store" href="" totalword="0">全部</a>
                            <a class="store" href="" totalword="1">30万字以下</a>
                            <a class="store" href="" totalword="2">30万-50万</a>
                            <a class="store" href="" totalword="3">50万-100万</a>
                            <a class="store" href="" totalword="4">100万-200万</a>
                            <a class="store" href="" totalword="5">200万以上</a>
                          </div>
                          <div class="cl0"></div>
                        </div>
                        <!-- 更新时间 -->
                        <div class="kind">
                          <div class="bz">更新时间：</div>
                          <div class="nr br">
                            <a class="current store" href="" updatetime="0">全部</a>
                            <a class="store" href="" updatetime="1">三日内</a>
                            <a class="store" href="" updatetime="2">七日内</a>
                            <a class="store" href="" updatetime="3">半月内</a>
                            <a class="store" href="" updatetime="4">一月内</a>
                          </div>
                          <div class="cl0"></div>
                        </div>
                        <!-- 书名首字母 -->
                        <div class="kind">
                          <div class="bz">书名首字母：</div>
                          <div class="nr">
                            <a class="current store" href="" firstchar="ALL">全部</a>
                            <a class="store" href="" firstchar="A">A</a><a class="store" href="" firstchar="B">B</a><a class="store" href="" firstchar="C">C</a><a class="store" href="" firstchar="D">D</a><a class="store" href="" firstchar="E">E</a><a class="store" href="" firstchar="F">F</a><a class="store" href="" firstchar="G">G</a><a class="store" href="" firstchar="H">H</a><a class="store" href="" firstchar="I">I</a><a class="store" href="" firstchar="J">J</a><a class="store" href="" firstchar="K">K</a><a class="store" href="" firstchar="L">L</a><a class="store" href="" firstchar="M">M</a><a class="store" href="" firstchar="N">N</a><a class="store" href="" firstchar="O">O</a><a class="store" href="" firstchar="P">P</a><a class="store" href="" firstchar="Q">Q</a><a class="store" href="" firstchar="R">R</a><a class="store" href="" firstchar="S">S</a><a class="store" href="" firstchar="T">T</a><a class="store" href="" firstchar="U">U</a><a class="store" href="" firstchar="V">V</a><a class="store" href="" firstchar="W">W</a><a class="store" href="" firstchar="X">X</a><a class="store" href="" firstchar="Y">Y</a><a class="store" href="" firstchar="Z">Z</a>
                            <a class="store" href="" firstchar="OTHER">其他</a>
                          </div>
                          <div class="cl0"></div>
                        </div>
                        <!-- 其他 -->
                        <div class="kind">
                          <div class="bz">其他：</div>
                          <div class="nr">
                            <a class="current store" href="" vip="9">不限</a>
                            <a class="store" href="" vip="0">免费</a>
                            <a class="store" href="" vip="1">VIP</a>
                            <a class="store" href="" vip="4">只看签约</a>
                          </div>
                          <div class="cl0"></div>
                        </div>
                        <div class="storeline"></div>
                        <div class="kind">
                          <div class="bz">已选条件：</div>
                          <div class="nr" id="selectedParams">
                          </div>
                          <div class="cl0"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
            </div>
          </div>
          <div class="row" style="    --bs-gutter-x: 0.0rem;">
            <div class="store_list_wrap">
              <div class="store_collist">
                  <div  th:each="bookInfo,bookInfoStat : ${bookInfos}">
                    <div th:class="${bookInfoStat.odd}?'bookbox fl' : 'bookbox fr'" class="bookbox fl">
                      <div class="bookimg">
                        <a href="" th:href="${bookInfo.id+'.html'}" target="_blank">
                          <img src="" th:src="${bookInfo.bookImgSource}" th:alt="${bookInfo.bookName}" alt="悟道寻真">
                        </a>
                      </div>
                      <div class="bookinfo">
                        <div class="bookname">
                          <a href=""  th:href="${bookInfo.id+'.html'}" target="_blank" th:text="${bookInfo.bookName}">悟道寻真</a>
                        </div>
                        <div class="bookilnk">
                          <a href="" target="_blank" th:href="${'author.html?author='+bookInfo.author}"   th:text="${bookInfo.author}">苏自在</a>|
                          <a href="" th:href="${'category.html?category='+bookInfo.category}" target="_blank" th:text="${bookInfo.category}">武侠仙侠</a>|
                          <span th:text="${bookInfo.updateStatus}">

                                    连载中

                                </span>|
                          <span th:text="'更新时间&nbsp;&nbsp;'+ ${#dates.format(bookInfo.lastUpdateTime, 'yyyy-MM-dd HH:mm')}">
                                更新时间&nbsp;&nbsp;07-13 16:05
                                </span>
                        </div>
                        <div class="bookintro" th:text="${bookInfo.bookDesc}">受够了世间冷暖，苏无暇在也不相信那些天上那些仙人说的不痛不痒的话。
                          既然你们都如此的安于天命，一切都是天定的，那我就把你们都废了法力丢到人间，那你们被废也是天定的，让你们自己去感受你们口中的天命。
                          这是一个少年逆天的故事，你们说一切天定，那我就成为你们的天。
                          不是六月风光好，人红酒香入眼帘。熟读道典三万字，不知白面值几钱。
                          细品万家滋味饭，修的无为道德仙。清滴浊酒还相愿，亦疯亦颠看人间。</div>
                        <div class="bookupdate">
                          <a href=""  th:href="${'latest.html?id='+bookInfo.id}"  class="fl" th:text="'最新章节：' + ${bookInfo.latestChapter}">最新章节：第三十七章 弃卜修山</a>
                          <span class="rank_d_b_time"></span>
                        </div>
                      </div>
                    </div>

                    <div class="dotline" th:style="${bookInfoStat.odd}?'display:none' : ''"></div>
                  </div>

              </div>
            </div>
          </div>

          <!-- 分页 -->
          <div class="d-flex" style="margin-top: 15px;">
            <ul class="pagination ml-auto">

              <!-- 首页 -->
              <li class="page-item pageItem" ><a class="page-link" href="#" th:href="${'/book/index.html?pageNum=1'+(pageSize == null ? '': ('&pageSize='+pageSize))+ (category==null?'':('&category='+category)) + (bookName==null?'':('&bookName='+bookName)) }">首页</a></li>

              <!-- 上一页 -->
              <li class="page-item pageItem disabled" th:if="${bookInfoPage.hasPrevious()}" th:class="${bookInfoPage.hasPrevious()?'page-item pageItem':'page-item pageItem disabled'}">
                <a class="page-link" href="#" th:href="${'/book/index.html?pageNum=' + (bookInfoPage.previousPageable().getPageNumber()+1)+(pageSize == null ? '': ('&pageSize='+pageSize))+(category==null?'':('&category='+category)) + (bookName==null?'':('&bookName='+bookName))}" tabindex="-1">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="15 6 9 12 15 18" /></svg>
                  上一页
                </a>
              </li>

              <span th:each="pageNum:${#numbers.sequence((currentPage+-2), currentPage+2)}">
                <li  class="page-item active" th:class="${pageNum==currentPage} ? 'page-item pageItem active' : 'page-item pageItem'" th:if="${((pageNum le bookInfoPage.getTotalPages()) && (pageNum gt 0))}">
                  <a class="page-link"  th:href="${'/book/index.html?pageNum=' + pageNum+(pageSize == null ? '': ('&pageSize='+pageSize))+(category==null?'':('&category='+category)) + (bookName==null?'':('&bookName='+bookName))}"
                     th:text="${pageNum}"  href="#">2</a>
                </li>
              </span>

<!--                <li  class="page-item active" th:class="${pageNum==currentPage} ? 'page-item pageItem active' : 'page-item pageItem'"
                     th:if="${currentPage gt 5}"
                     th:each="pageNum:${#numbers.sequence(currentPage+-2, currentPage+2)}">
                  <a class="page-link"  th:href="${'/book/index.html?pageNum=' + pageNum+(category==null?'':('&category='+category)) + (bookName==null?'':('&bookName='+bookName))}"
                     th:text="${pageNum}" th:if="${((pageNum le bookInfoPage.getTotalPages()) && (pageNum gt 0))}" href="#">2</a>
                </li>
              &lt;!&ndash; 中间页 &ndash;&gt;-->


              <!-- 下一页 -->
              <li class="page-item pageItem"><a class="page-link" href="#" th:if="${bookInfoPage.hasNext()}"  th:href="${'/book/index.html?pageNum=' + (bookInfoPage.nextPageable().getPageNumber()+1)+(pageSize == null ? '': ('&pageSize='+pageSize))+(category==null?'':('&category='+category)) + (bookName==null?'':('&bookName='+bookName))}" th:text="下一页">3</a></li>

              <!-- 尾页 -->
              <li class="page-item pageItem"><a class="page-link" href="#"  th:href="${'/book/index.html?pageNum=' + bookInfoPage.getTotalPages()+(pageSize == null ? '': ('&pageSize='+pageSize))+(category==null?'':('&category='+category)) + (bookName==null?'':('&bookName='+bookName))}">尾页</a></li>

            </ul>
          </div>
        </div>

        <footer th:replace="include :: footer" class="footer footer-transparent"></footer>
      </div>
    </div>
    <!-- Libs JS -->
    <script th:src="${session.staticResourcePath +'/static/dist/libs/bootstrap/dist/js/bootstrap.bundle.min.js'}"></script>
    <script>

      $(function() {
        // 隐藏全局搜索框
        $("#totalSearchDiv").attr("style","display:none;");
      });

      // 书籍搜索框
      $('#searchBook').bind('keypress',function(event){
        console.log("敲击键盘");
        if(event.keyCode == "13"){
          console.log("敲击回车键");
          var bookName = $('#searchBook').val();
          console.log(bookName);
          if (bookName.length < 1 || bookName.length > 20) {
            return ;
          }
          var url = "/book/index.html?bookName="+bookName;
          window.location.replace(url);
        }
      });
    </script>

  </body>
</html>